/* Compiled by XC 1.06.01 on 29Sep17 */
CKEDITOR.dialog.add('ink',function(editor){return{title:'Ink Signature Properties',minWidth:550,minHeight:200,contents:[{id:'tab-basic',label:'Basic Settings',elements:[{type:'hbox',widths:['50%','50%'],children:[{type:'text',id:'lux_ink_name',label:'<b>Name</b> <span style="color:#888">(Required; make unique/descriptive)</span>',style:'width: 100%',validate:CKEDITOR.dialog.validate.notEmpty("Name: cannot be empty"),setup:function(element){this.setValue(element.getAttribute("name"));},commit:function(element){element.setAttribute("name",this.getValue());}},{type:'text',id:'lux_ink_id',label:'<b>Element ID</b> <span style="color:#888">(Required; make unique)</span>',style:'width: 100%',validate:CKEDITOR.dialog.validate.notEmpty("Element ID: cannot be empty"),setup:function(element){this.setValue(element.getAttribute("id"));},commit:function(element){element.setAttribute("id",this.getValue());}}]},{type:'hbox',widths:['50%','50%'],children:[{type:'text',id:'lux_textsize',label:'Field Width <span style="color:#888">(in pixels)</span>',style:'width:100%',validate:function(){var v=this.getValue();if(!v||v&&(isNaN(parseInt(v))||v<1||v!=parseInt(v))){alert('The value for Width must be a positive number.');return false;}return true;},setup:function(element){this.setValue(element.getAttribute("w"));},commit:function(element){element.setAttribute("w",this.getValue());}},{type:'text',id:'lux_textsize2',label:'Field Height <span style="color:#888">(in pixels)</span>',style:'width:100%',validate:function(){var v=this.getValue();if(!v||v&&(isNaN(parseInt(v))||v<1||v!=parseInt(v))){alert('The value for Height must be a positive number.');return false;}return true;},setup:function(element){this.setValue(element.getAttribute("h"));},commit:function(element){var h=this.getValue();element.setAttribute("h",h);var d=this.getDialog();var w=d.getValueOf("tab-basic","lux_textsize");var bg=d.getValueOf("tab-adv","lux_bg");var fg=d.getValueOf("tab-adv","lux_fg");element.setAttribute("style","width:"+w+"px;height:"+h+"px;background-color:"+bg+";color:"+fg);$(element).html("["+d.getValueOf("tab-basic","lux_ink_name")+"]");}},]},{type:'hbox',widths:['100%'],children:[{type:'text',id:'lux_textcal',label:'Caption  <span style="color:#888">(optional; Text below sigature in resulting image)</span>',style:'width:100%',setup:function(element){this.setValue(element.getAttribute("caption"));},commit:function(element){element.setAttribute("caption",this.getValue());}}]},{type:'hbox',widths:['100%'],children:[{type:'select',id:'lux_val',label:'Validation: Signature Required?',style:'width:100%',items:[['No: Unsigned OK','no'],['Yes: Signature needed','yes']],default:'no',setup:function(element){var v=element.getAttribute("required");this.setValue(String(v).match(/yes/i)?"yes":"no");},commit:function(element){var v=this.getValue();if(v=="yes")element.setAttribute("required",v);else element.removeAttribute("required");}}]}]},{id:'tab-adv',label:'Advanced Settings',elements:[{type:'hbox',widths:['50%','50%'],children:[{type:'text',id:'lux_bg',label:'Background Color',style:'width:100%',setup:function(element){this.setValue(element.getAttribute("bg"));},commit:function(element){element.setAttribute("bg",this.getValue());}},{type:'text',id:'lux_fg',label:'Signature Color',style:'width:100%',setup:function(element){this.setValue(element.getAttribute("fg"));},commit:function(element){element.setAttribute("fg",this.getValue());}}]},{type:'hbox',widths:['50%','50%'],children:[{type:'text',id:'lux_class',label:'CSS Class <span style="color:#888">(optional; for canvas or div elements)</span>',style:'width:100%',setup:function(element){this.setValue(element.getAttribute("class"));},commit:function(element){element.setAttribute("class",this.getValue());}},{type:'text',id:'lux_file',label:'Ink Signature Image File Name',style:'width:100%',setup:function(element){this.setValue(element.getAttribute("file_name"));},commit:function(element){element.setAttribute("file_name",this.getValue());}}]}]}],onShow:function(){var selection=editor.getSelection();var element=selection.getStartElement();if(element)element=element.getAscendant('div',true);if(!element||element.getAttribute("x-inksig")!="1"){element=editor.document.createElement('div');element.setAttribute("x-inksig","1");element.setAttribute("name","signature");element.setAttribute("class","x_inksig");element.setAttribute("id","signature");element.setAttribute("w","400");element.setAttribute("h","100");element.setAttribute("caption","Signature");element.setAttribute("file_name","signature.png");element.setAttribute("fg","black");element.setAttribute("bg","#EEEEEE");element.$.value="[signature]";this.insertMode=true;}else this.insertMode=false;this.element=element;this.setupContent(this.element);},onOk:function(){var dialog=this;var lux_ink=this.element;this.commitContent(lux_ink);if(this.insertMode)editor.insertElement(lux_ink);}};});
